<canvas id="ctx" width="1400px" height="800px" style="border:1px solid #000000;"></canvas>
 
 <html>
 
<script>
var ctx = document.getElementById("ctx").getContext("2d");
ctx.font = '30px Arial';
 var audio = new Audio('outrun.mp3');
var HEIGHT = 800;
var WIDTH = 1400;
var fps = 60;
var direction = 0; // 0 : clockwise 1: conterclockwise
var separation = 100; 
var count = 0;
var article1 ="China has agreed to reclassify fentanyl as a controlled substance, in what the White House is calling a wonderful humanitarian gesture after the much-anticipated talks Saturday between US President Donald Trump and Chinese President Xi Jinping in Buenos Aires, Argentina. In a statement, China's Foreign Ministry said China has decided to schedule the entire category of fentanyl-type substances as controlled substances, and start the process of revising relevant laws and regulations.China and the United States have agreed to take active measures to strengthen cooperation on law enforcement and narcotics control, including the control of fentanyl-type substances, it said. The new designation for the synthetic opioid drug means people in China who sell fentanyl to the US will be subject to China's maximum penalty under the law, according to a statement from the White House. Trump and Xi met Saturday for dinner on the sidelines of the G20 summit in Buenos Aires. Fentanyl's new designation is one result from their meeting. The US also agreed to maintain the 10% tariffs on $200 billion worth of Chinese goods, instead of raising them to 25%, the White House said. Fentanyl, an extremely powerful drug, is 50 to 100 times more potent than morphine and 30 to 50 times more potent than heroin. According to the US Centers for Disease Control and Prevention, 5,500 people died of synthetic opioid overdoses in 2014, most of them related to fentanyl. That's an 80% increase over the number of deaths reported in 2013. Last year, the Drug Enforcement Administration issued a national alert stating that drug incidents and overdoses related to fentanyl are occurring at an alarming rate. In 2013, the Drug Enforcement Administration made 942 fentanyl seizures; in 2014, it made 3,344. In August, Trump claimed on Twitter Chinese suppliers are fueling America's opioid crisis. It is outrageous that Poisonous Synthetic Heroin Fentanyl comes pouring into the U.S. Postal System from China. We can, and must, END THIS NOW! The Senate should pass the STOP ACT -- and firmly STOP this poison from killing our children and destroying our country. No more delay! the tweet said.";


var player = {
        x:100,
        spd:0,
        y:100,
        name:'P',
        color:'green',
        presskey:'false',
        distance : 0,
};

var enemy = {
        x:200,
        spd:1.2,
        y:100,
        name:'P',
        color:'green',
        presskey:'false',
        distance: 0,
};

function collision_detection(person1, person2) {
        if (Math.abs(person1.x - person2.x) < 2)
                if (Math.abs(person1.y - person2 . y )< 2) {
                alert("Game over.");
                player.x = 100;
                player.y = 100;
                enemy.x = 200;
                enemy.y = 100;
                player.spd = 0;
                enemy.spd = enemy.spd + 0.1;
                player.distance = 0;
                enemy.distance = 0;
                separation = 100;
                direction = 0;
            }    
}

function distance_detection(person1, person2) {
        // person1 player
        // person2 enemy
        if ((1200 - separation - (enemy.distance - player.distance)) < 100) {
                separation = 1200 - separation - (enemy.distance - player.distance);
                enemy.distance = 0;
                player.distance = 0;
                direction = 1 - direction;
        }

}


document.onkeydown = function(event){
        audio.play();
event.preventDefault();
console.log(event.keyCode);
 c = String.fromCharCode(event.keyCode);
 if (event.shiftKey)  {
        if (event.keyCode == 49)
                c = '!';
        else if (event.keyCode == 50)
                c = '@';
        else if (event.keyCode == 51)
                c = '#';
        else if (event.keyCode == 52)
                c = '$';
        else if (event.keyCode == 53) 
                c = '%';
        else if (event.keyCode == 54)
                c = '^';
        else if (event.keyCode == 55)
                c = '&';
        else if (event.keyCode == 56)
                c = '*';
        else if (event.keyCode == 57)
                c = '(';
        else if (event.keyCode == 58)
                c = ')';
        else if (event.keyCode == 59)
                c = '_';
        else if (event.keyCode == 60)
                c = '+';
 }
 else  {
c = c.toLowerCase(c);
 console.log(c);

}
if (event.keyCode == 1186)
c = ';';
else if (event.keyCode == 188)
c = ',';
else if (event.keyCode == 189)
c = '-';
else if (event.keyCode == 190)
c = '.';
else if (event.keyCode == 191)
c = '/';
else if (event.keyCode == 222)
c = '\'';
               // console.log(event.which);
               // console.log()
                 // console.log(article1.charCodeAt(count));


if ( c === article1.charAt(count)) {
player.spd = player.spd + 0.9  ;
count = count + 1;
//ctx.fillText(article1.substring(count,count + 40),10,430);
}

}

function updateDirection(someone, direction) {
        if (direction == 0) {
        if (someone.y == 100)  {
someone.x = someone.x + someone.spd;
if (someone.x > 400) {
        someone.y = someone.y + (someone.x - 400);
        someone.x = 400;
}
} 
else if (someone.y == 400) {
        someone.x = someone.x - someone.spd;
        if (someone. x < 100) {
                someone.y = someone.y - (100 - someone.x);
                someone.x = 100;
        }
}
else if (someone.x == 100) {
        someone.y = someone.y - someone.spd;
        if (someone.y < 100) {
                someone.x = someone.x + (100 - someone.y);
                someone.y = 100;
        }
}
else if (someone.x == 400) {
        someone.y = someone.y + someone.spd;
        if (someone.y > 400) {
                someone.x = someone.x - (someone.y -400);
                someone.y = 400;
        }
}
} 
else {
       if (someone.y == 100)  {
someone.x = someone.x - someone.spd;
if (someone.x < 100) {
        someone.y = someone.y + (100 - someone.x);
        someone.x = 100;
}
} 
else if (someone.y == 400) {
        someone.x = someone.x + someone.spd;
        if (someone. x > 400) {
                someone.y = someone.y - (someone.x - 400);
                someone.x = 400;
        }
}
else if (someone.x == 100) {
        someone.y = someone.y + someone.spd;
        if (someone.y > 400) {
                someone.x = someone.x + (someone.y - 400);
                someone.y = 400;
        }
}
else if (someone.x == 400) {
        someone.y = someone.y - someone.spd;
        if (someone.y < 100) {
                someone.x = someone.x - (100 -someone.y);
                someone.y = 100;
        }
}
}  
}


update = function() {
ctx.clearRect(0,0,WIDTH ,HEIGHT );
ctx.beginPath();
ctx.moveTo(100,100);
ctx.lineTo(100,400);
//ctx.moveTo(100,400);
ctx.lineTo(400,400);
//ctx.moveTo(400,400);
ctx.lineTo(400,100);
//ctx.moveTo(400,100);
ctx.lineTo(100,100);
ctx.stroke();
updateDirection(player,direction);
updateDirection(enemy,direction);
player.distance = player.distance + player.spd;
enemy.distance = enemy.distance + enemy.spd;
distance_detection(player,enemy);
ctx.fillText("X",player.x,player.y); 
ctx.fillText("E",enemy.x,enemy.y);
collision_detection(player,enemy);
player.spd = (player.spd -0.03) /1.05  ;
if (player.spd < 0) 
player.spd = 0;

ctx.fillText(article1.substring(count,count + 40),10,430);

}
setInterval(update,1000/fps);

</script>
</html>